<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <link rel="icon" type="image/svg+xml" href="./vite.svg" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Habit Tracker</title>
    <script type="module" crossorigin src="./assets/index-d8d2cb0c.js"></script>
    <link rel="stylesheet" href="./assets/index-34370f57.css">
  </head>
  <body>
    <div id="root"></div>
    

    <script>
      // Ð¤ÑƒÐ½ÐºÑ†Ð¸Ñ Ñ€ÐµÐ³Ð¸ÑÑ‚Ñ€Ð°Ñ†Ð¸Ð¸ Service Worker
      function registerServiceWorker() {
        if ('serviceWorker' in navigator) {
          window.addEventListener('load', () => {
            // Ð£ÐºÐ°Ð·Ñ‹Ð²Ð°ÐµÐ¼ Ð¿ÑƒÑ‚ÑŒ Ð¾Ñ‚Ð½Ð¾ÑÐ¸Ñ‚ÐµÐ»ÑŒÐ½Ð¾ ÐºÐ¾Ñ€Ð½Ñ frontend/
            navigator.serviceWorker.register('/service-worker.js')
              .then(registration => {
                console.log('âœ… ServiceWorker Ð·Ð°Ñ€ÐµÐ³Ð¸ÑÑ‚Ñ€Ð¸Ñ€Ð¾Ð²Ð°Ð½:', registration.scope);
                
                // ÐŸÑ€Ð¾Ð²ÐµÑ€ÑÐµÐ¼ Ð¾Ð±Ð½Ð¾Ð²Ð»ÐµÐ½Ð¸Ñ
                registration.onupdatefound = () => {
                  const installingWorker = registration.installing;
                  if (installingWorker) {
                    installingWorker.onstatechange = () => {
                      if (installingWorker.state === 'installed') {
                        if (navigator.serviceWorker.controller) {
                          console.log('ðŸ”„ ÐÐ¾Ð²Ð°Ñ Ð²ÐµÑ€ÑÐ¸Ñ Ð´Ð¾ÑÑ‚ÑƒÐ¿Ð½Ð°!');
                        } else {
                          console.log('âœ… ÐŸÑ€Ð¸Ð»Ð¾Ð¶ÐµÐ½Ð¸Ðµ Ð³Ð¾Ñ‚Ð¾Ð²Ð¾ Ðº Ð¾Ñ„Ñ„Ð»Ð°Ð¹Ð½-Ñ€Ð°Ð±Ð¾Ñ‚Ðµ');
                        }
                      }
                    };
                  }
                };
              })
              .catch(error => {
                console.error('âŒ ÐžÑˆÐ¸Ð±ÐºÐ° Ñ€ÐµÐ³Ð¸ÑÑ‚Ñ€Ð°Ñ†Ð¸Ð¸ ServiceWorker:', error);
              });
          });
        } else {
          console.log('âŒ Service Worker Ð½Ðµ Ð¿Ð¾Ð´Ð´ÐµÑ€Ð¶Ð¸Ð²Ð°ÐµÑ‚ÑÑ');
        }
      }
      
      // Ð¤ÑƒÐ½ÐºÑ†Ð¸Ñ Ð·Ð°Ð¿Ñ€Ð¾ÑÐ° Ñ€Ð°Ð·Ñ€ÐµÑˆÐµÐ½Ð¸Ñ Ð½Ð° ÑƒÐ²ÐµÐ´Ð¾Ð¼Ð»ÐµÐ½Ð¸Ñ
      function requestNotificationPermission() {
        if ('Notification' in window) {
          if (Notification.permission === 'default') {
            Notification.requestPermission().then(permission => {
              console.log('ðŸ”” Ð Ð°Ð·Ñ€ÐµÑˆÐµÐ½Ð¸Ðµ Ð½Ð° ÑƒÐ²ÐµÐ´Ð¾Ð¼Ð»ÐµÐ½Ð¸Ñ:', permission);
              localStorage.setItem('notification-permission', permission);
            });
          } else {
            console.log('ðŸ”” Ð¢ÐµÐºÑƒÑ‰ÐµÐµ Ñ€Ð°Ð·Ñ€ÐµÑˆÐµÐ½Ð¸Ðµ:', Notification.permission);
          }
        }
      }
      
      // Ð—Ð°Ð¿ÑƒÑÐºÐ°ÐµÐ¼ Ð¿Ñ€Ð¸ Ð·Ð°Ð³Ñ€ÑƒÐ·ÐºÐµ ÑÑ‚Ñ€Ð°Ð½Ð¸Ñ†Ñ‹
      document.addEventListener('DOMContentLoaded', () => {
        registerServiceWorker();
        requestNotificationPermission();
      });
    </script>
  </body>
</html>